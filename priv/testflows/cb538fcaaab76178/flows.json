[{"id":"cb538fcaaab76178","type":"tab","label":"[supervisor] supervisor loops","disabled":false,"info":"<small><i>[Share Link](https://flows.red-erik.org/f/cb538fcaaab76178)</i></small>\n\n## Supervisor loops\n\nSupervisor loops are not possible and Erlang-Red should error out.\n\n![img](https://cdn.openmindmap.org/content/1748870779411_Screenshot_2025-06-02_at_15.26.10.png)\n\nThis this flow the <a class=\"ahl-node-only\" data-ids=\"6aed3a08befb93aa\">first supervisor</a> is the supervisor of the <a class=\"ahl-node-only\" data-ids=\"bf3c14de41930be2\">second supervisor</a> which in turn is the supervisor of the <a class=\"ahl-node-only\" data-ids=\"923a99213caa43c4\">third supervisor</a> which is the supervisor of the <a class=\"ahl-node-only\" data-ids=\"a0451f2d039d8778\">fourth supervisor</a>, the <a class=\"ahl-node-only\" data-ids=\"19d8f8c07a31296c\">debug 2</a> node and the <a class=\"ahl-node-only\" data-ids=\"6b5f9bcec32f2b8b\">exit on message</a> function node.\n\nThat structure would be perfectly ok it weren't for the fact that the <a class=\"ahl-node-only\" data-ids=\"a0451f2d039d8778\">fourth supervisor</a> is also the supervisor of the <a class=\"ahl-node-only\" data-ids=\"6aed3a08befb93aa\">first supervisor</a> and that closes the loop.\n\nThis structure is not possible because it could well lead to an loop of restarts and failures or restarts of restarts.\n\n\n","env":[]},{"id":"923a99213caa43c4","type":"erlsupervisor","z":"cb538fcaaab76178","name":"third supervisor","scope":["6b5f9bcec32f2b8b","19d8f8c07a31296c","a0451f2d039d8778"],"supervisor_type":"static","strategy":"one_for_one","auto_shutdown":"never","intensity":"52","period":"20","child_type":"worker","child_restart":"permanent","child_shutdown":"infinite","child_shutdown_timeout":"0","x":1320.0000762939453,"y":324.3333535194397,"wires":[[]]},{"id":"6b5f9bcec32f2b8b","type":"function","z":"cb538fcaaab76178","name":"exit on message","func":"exit(self(), normal)","outputs":1,"timeout":0,"noerr":0,"initialize":"","finalize":"","libs":[],"x":1304.3334121704102,"y":401.66663932800293,"wires":[[]]},{"id":"fdd041cfd080c1d7","type":"inject","z":"cb538fcaaab76178","name":"Start Button","props":[{"p":"payload"},{"p":"msgcnt","v":"0","vt":"num"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":442.00000762939453,"y":408.33337593078613,"wires":[["aba46d81a0c32892"]]},{"id":"aba46d81a0c32892","type":"change","z":"cb538fcaaab76178","name":"","rules":[{"p":"payload","pt":"msg","t":"set","to":"","tot":"date"},{"p":"msgcnt","pt":"msg","t":"set","to":"$$.msgcnt + 1","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":647.3333511352539,"y":452.04089546203613,"wires":[["a276f161c4527b56","7ef61d2fb5ccdb2a","6b5f9bcec32f2b8b","19d8f8c07a31296c"]]},{"id":"a276f161c4527b56","type":"delay","z":"cb538fcaaab76178","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"allowrate":false,"outputs":1,"x":839.333381652832,"y":526.4158954620361,"wires":[["85cd42cbfa36fb5d"]]},{"id":"7ef61d2fb5ccdb2a","type":"debug","z":"cb538fcaaab76178","name":"debug 1","active":true,"tosidebar":false,"console":false,"tostatus":true,"complete":"payload","targetType":"msg","statusVal":"","statusType":"counter","x":836.333381652832,"y":397.33337593078613,"wires":[]},{"id":"85cd42cbfa36fb5d","type":"switch","z":"cb538fcaaab76178","name":"stop after 2000 messages","property":"msgcnt","propertyType":"msg","rules":[{"t":"lt","v":"2000","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":420.9999771118164,"y":529.4158954620361,"wires":[["aba46d81a0c32892"]]},{"id":"19d8f8c07a31296c","type":"debug","z":"cb538fcaaab76178","name":"debug 2","active":true,"tosidebar":false,"console":false,"tostatus":true,"complete":"payload","targetType":"msg","statusVal":"","statusType":"counter","x":1299.6667442321777,"y":485.3333683013916,"wires":[]},{"id":"6aed3a08befb93aa","type":"erlsupervisor","z":"cb538fcaaab76178","name":"first supervisor","scope":["bf3c14de41930be2"],"supervisor_type":"static","strategy":"one_for_one","auto_shutdown":"never","intensity":"1000","period":"1","child_type":"worker","child_restart":"permanent","child_shutdown":"infinite","child_shutdown_timeout":"0","x":1073.3332061767578,"y":243.3333158493042,"wires":[[]]},{"id":"bf3c14de41930be2","type":"erlsupervisor","z":"cb538fcaaab76178","name":"second supervisor","scope":["923a99213caa43c4"],"supervisor_type":"static","strategy":"one_for_one","auto_shutdown":"never","intensity":"30","period":"30","child_type":"worker","child_restart":"permanent","child_shutdown":"infinite","child_shutdown_timeout":"0","x":1320.9997940063477,"y":242.66665649414062,"wires":[[]]},{"id":"a0451f2d039d8778","type":"erlsupervisor","z":"cb538fcaaab76178","name":"fourth supervisor","scope":["6aed3a08befb93aa"],"supervisor_type":"static","strategy":"one_for_one","auto_shutdown":"never","intensity":"1","period":"5","child_type":"worker","child_restart":"permanent","child_shutdown":"infinite","child_shutdown_timeout":"0","x":1088.666374206543,"y":328.9999294281006,"wires":[[]]}]