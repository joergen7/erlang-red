[{"id":"def45a46c8f4da72","type":"tab","label":"[change] support nested array indicies - setting & getting & deleting","disabled":false,"info":"# Mix of arrays and maps\n\nNode-RED is capable of mixing array indexing and object access, that looks like this:\n\n```\n{ \"payload\":\n    {\n        \"key\": [1, { \n                \"key2\": \"value\"\n            }, 2]\n    }\n}\n```\n\nusing `payload.key.1.key2` gives `value`. Notice that Node-RED is zero-based indexing while Erlang is 1-based indexing, so Erlang-Red is also zero-based array indexing.\n\nAlso using `payload.key[1].key2` gives the same result.\n","env":[]},{"id":"8e7e96a0c1e99381","type":"change","z":"def45a46c8f4da72","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"{\"array\":[0,1,{\"object\":[2,3,4,{\"object\":[1,\"value\"]}]}]}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":257,"y":403,"wires":[["73219477661f5439","ddcaad6d8312acc9"]]},{"id":"8786ac5c99bc630a","type":"inject","z":"def45a46c8f4da72","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":168,"y":261,"wires":[["8e7e96a0c1e99381"]]},{"id":"73219477661f5439","type":"change","z":"def45a46c8f4da72","name":"","rules":[{"t":"set","p":"payload.array.2.object.3.object[1]","pt":"msg","to":"another value","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":547,"y":517,"wires":[["daa01ebcac168a76"]]},{"id":"ddcaad6d8312acc9","type":"ut-assert-values","z":"def45a46c8f4da72","name":"","ignore_failure_if_succeed":false,"rules":[{"t":"eql","p":"payload.array.2.object.3.object[1]","pt":"msg","to":"value","tot":"str"}],"x":652,"y":291,"wires":[[]]},{"id":"daa01ebcac168a76","type":"ut-assert-values","z":"def45a46c8f4da72","name":"","ignore_failure_if_succeed":false,"rules":[{"t":"eql","p":"payload.array.2.object.3.object[1]","pt":"msg","to":"another value","tot":"str"}],"x":981,"y":440,"wires":[[]]},{"id":"d47b9afc87fabbc7","type":"inject","z":"def45a46c8f4da72","name":"","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"key\":[1,{\"key2\":\"value\"},2]}","payloadType":"json","x":1304,"y":229,"wires":[["74223d795e20a998"]]},{"id":"74223d795e20a998","type":"ut-assert-values","z":"def45a46c8f4da72","name":"","ignore_failure_if_succeed":false,"rules":[{"t":"eql","p":"payload.key.1.key2","pt":"msg","to":"value","tot":"str"},{"t":"eql","p":"payload.key[1]key2","pt":"msg","to":"value","tot":"str"}],"x":1438,"y":343,"wires":[[]]},{"id":"0f3d2b3850c0c0f5","type":"inject","z":"def45a46c8f4da72","name":"","props":[{"p":"payload"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"key\":[1,{\"key2\":\"value\"},2]}","payloadType":"json","x":330.9999084472656,"y":914.1666088104248,"wires":[["85d50336ac74421a","72535d8843255c30","bb4883d647e0e5bf","d688949350faac2c","fad65bdddd44ca96"]]},{"id":"85d50336ac74421a","type":"ut-assert-values","z":"def45a46c8f4da72","name":"","ignore_failure_if_succeed":false,"rules":[{"t":"eql","p":"payload.key.1.key2","pt":"msg","to":"value","tot":"str"},{"t":"eql","p":"payload.key[1]key2","pt":"msg","to":"value","tot":"str"}],"x":606.9999084472656,"y":1085.1666088104248,"wires":[[]]},{"id":"72535d8843255c30","type":"debug","z":"def45a46c8f4da72","name":"debug 441","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":566.9999084472656,"y":726.1666088104248,"wires":[]},{"id":"bb4883d647e0e5bf","type":"change","z":"def45a46c8f4da72","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.key[1]key2","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":601.9999084472656,"y":875.1666088104248,"wires":[["4c398127f83f23d4"]]},{"id":"4c398127f83f23d4","type":"ut-assert-values","z":"def45a46c8f4da72","name":"","ignore_failure_if_succeed":false,"rules":[{"t":"eql","p":"payload","pt":"msg","to":"value","tot":"str"}],"x":859.9999084472656,"y":862.1666088104248,"wires":[[]]},{"id":"d688949350faac2c","type":"change","z":"def45a46c8f4da72","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.key[1]\"key2\"","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":588.9999084472656,"y":955.1666088104248,"wires":[["90a1cd0d45f01204"]]},{"id":"90a1cd0d45f01204","type":"ut-assert-values","z":"def45a46c8f4da72","name":"","ignore_failure_if_succeed":false,"rules":[{"t":"eql","p":"payload","pt":"msg","to":"value","tot":"str"}],"x":853.9999084472656,"y":1011.1666088104248,"wires":[[]]},{"id":"fad65bdddd44ca96","type":"change","z":"def45a46c8f4da72","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.key[1]\"key2\"","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":593.9999084472656,"y":914.1666088104248,"wires":[["e5587f694f6fe23e"]]},{"id":"e5587f694f6fe23e","type":"ut-assert-values","z":"def45a46c8f4da72","name":"","ignore_failure_if_succeed":false,"rules":[{"t":"eql","p":"payload","pt":"msg","to":"value","tot":"str"}],"x":837.9999084472656,"y":929.1666088104248,"wires":[[]]},{"id":"3a2b56a823d9a8a9","type":"inject","z":"def45a46c8f4da72","name":"","props":[{"p":"payload"},{"p":"key['ddd']fubar","v":"dd","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"key\":[1,{\"key2\":\"value\"},2]}","payloadType":"json","x":597.9999084472656,"y":1021.1666088104248,"wires":[["aeb560f5e49b2232"]]},{"id":"aeb560f5e49b2232","type":"ut-assert-values","z":"def45a46c8f4da72","name":"","ignore_failure_if_succeed":false,"rules":[{"t":"eql","p":"key['ddd'].fubar","pt":"msg","to":"dd","tot":"str"}],"x":886.9999084472656,"y":1076.1666088104248,"wires":[[]]},{"id":"eefd0c391f0c76cd","type":"inject","z":"def45a46c8f4da72","name":"","props":[{"p":"payload"},{"p":"key[\"ddd\"]fubar[\"d\"]123","v":"dd","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"key\":[1,{\"key2\":\"value\"},2]}","payloadType":"json","x":643.9999084472656,"y":1194.1666088104248,"wires":[["cb9c2c9149ee6ea0"]]},{"id":"cb9c2c9149ee6ea0","type":"ut-assert-values","z":"def45a46c8f4da72","name":"","ignore_failure_if_succeed":false,"rules":[{"t":"eql","p":"key.ddd.fubar.d[\"123\"]","pt":"msg","to":"dd","tot":"str"}],"x":881.9999084472656,"y":1258.1666088104248,"wires":[[]]},{"id":"ead155777d4076f5","type":"inject","z":"def45a46c8f4da72","name":"","props":[{"p":"payload"},{"p":"key[\"ddd\"]fubar[\"d\"].123.12","v":"dd","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"key\":[1,{\"key2\":\"value\"},2]}","payloadType":"json","x":379.9999084472656,"y":1147.1666088104248,"wires":[["d0f7c4c768a41267"]]},{"id":"d0f7c4c768a41267","type":"ut-assert-values","z":"def45a46c8f4da72","name":"","ignore_failure_if_succeed":false,"rules":[{"t":"eql","p":"key.ddd.fubar.d[123][\"12\"]","pt":"msg","to":"dd","tot":"str"}],"x":734.9999084472656,"y":1327.1666088104248,"wires":[[]]},{"id":"d6c3015c98fba655","type":"inject","z":"def45a46c8f4da72","name":"","props":[{"p":"key[\"ddd\"]fubar[\"d\"].123.12.23","v":"dd","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","x":820.9999084472656,"y":1390.1666088104248,"wires":[["1c1106d3968ebc2e"]]},{"id":"1c1106d3968ebc2e","type":"ut-assert-values","z":"def45a46c8f4da72","name":"","ignore_failure_if_succeed":false,"rules":[{"t":"eql","p":"key.ddd.fubar.d[123][12][\"23\"]","pt":"msg","to":"dd","tot":"str"}],"x":1108.9998779296875,"y":1426.1666259765625,"wires":[[]]}]