[{"id":"45209c67f865ce73","type":"tab","label":"[csv] [decode] single message per line","disabled":false,"info":"## CSV decoder test - message per row\n\nGenerate a message per row of data.\n\nThe <a class=\"ahl-group-only\" data-ids=\"d15f5ac37f997abb\">top group - no header row</a> contains 48 rows since the first row is also considered to be data. The column names are then `col1,col2,...`.\n\nThe <a class=\"ahl-group-only\" data-ids=\"eb65804ed29893ba\">bottom group - first row is header - column names</a> assumes - correctly - that the first row contains the column names and therefore only has 47 data points, since the first row is consumed to define the column names.","env":[{"name":"ERED_TIMEOUT","value":"5","type":"num"}]},{"id":"d15f5ac37f997abb","type":"group","z":"45209c67f865ce73","name":"top group - no header row","style":{"label":true},"nodes":["fafe3a9f7d53948c","dd3d56986aa5c62e","2de3df48591831f9","6854b9b186eb1dcc","c50b22b0716816ab","711c71fe50bae113"],"x":553,"y":445,"w":806.5,"h":230.5},{"id":"eb65804ed29893ba","type":"group","z":"45209c67f865ce73","name":"bottom group - first row is header - column names","style":{"label":true},"nodes":["167c3aaf5457d21c","c18c538ada98b13a","6d538a8c6804e906","53a35903c1d3af4a","4279cac4a60d86c4","25f61f7c1dcd0dab"],"x":653,"y":687.5,"w":706,"h":222},{"id":"b9a4ffac5f73fc57","type":"inject","z":"45209c67f865ce73","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":208,"y":475,"wires":[["282a03e314170808"]]},{"id":"282a03e314170808","type":"template","z":"45209c67f865ce73","name":"csv data","field":"payload","fieldType":"msg","format":"text","syntax":"mustache","template":"都道府県,人口集中地区人口比率,昼夜間人口比率,就業者比率,飲食店・宿泊業就業者比率,旅行行動者率,外国人宿泊者比率,単独世帯比率,人口10万人当たり感染者率\n北海道,75.2,99.9,45.25,5.79,54.6,25.29,37.19,24.12\n青森県,46.63,99.8,47.85,4.65,40.6,8.01,30.03,2.14\n岩手県,31.88,99.8,49.73,4.81,46.1,4.74,30.13,0\n宮城県,64.05,100.3,46.19,5.1,59.7,4.21,34.28,4.06\n秋田県,34.96,99.8,47.2,4.76,49.2,3.76,27.83,1.63\n山形県,43.69,99.7,50.01,4.66,54.4,3.07,25.42,6.33\n福島県,42.62,100.2,48.18,4.73,53.6,1.71,30.28,4.4\n茨城県,38.16,97.5,48.02,4.34,54.6,4.24,28.31,6.05\n栃木県,45.19,99,48.83,5.05,53.5,3.15,28.79,3.91\n群馬県,39.91,99.8,48.96,5.02,54.8,3.92,28.56,7.79\n埼玉県,80.2,88.9,47.95,4.52,65.7,3.93,30.44,15.89\n千葉県,74.28,89.7,46.28,5.06,64.8,17.22,32.31,15.19\n東京都,98.37,117.8,43.35,6.35,69.2,36.48,47.23,46.34\n神奈川県,94.41,91.2,45.16,5.23,66.5,13.4,35.37,16.67\n新潟県,48.66,99.9,49.51,4.78,57.3,3.73,27.54,3.74\n富山県,37.79,99.8,50.53,4.2,60.9,8.53,26.09,21.62\n石川県,51.45,100.2,49.62,5.81,60.8,10.8,31.44,26.25\n福井県,43.98,100,50.74,4.85,55.6,2.17,26.32,15.76\n山梨県,31.24,99.2,48.96,6.16,55.3,24.63,29.47,9.06\n長野県,34.23,99.8,50.97,5.81,56.7,8.96,27.8,3.73\n岐阜県,38.21,96.1,50,5.2,56.8,21.67,25.75,7.81\n静岡県,59.89,99.8,50.41,5.32,54.8,8.73,28.49,2.27\n愛知県,77.54,101.4,49.03,5.15,64.5,17.22,33.44,6.99\n三重県,43.46,98.3,48.06,4.72,59.7,4.62,29.36,2.57\n滋賀県,49.68,96.5,47.98,4.33,63.1,10.01,28.41,7.22\n京都府,83.56,101.8,45.69,6.56,59.7,29.48,38.16,14.63\n大阪府,95.66,104.4,42.74,5.76,59.1,36.2,37.48,21.04\n兵庫県,77.67,95.7,44.15,5.16,59.4,9.87,32.66,12.96\n奈良県,64.77,90,43.31,4.43,62,17.32,25.65,6.87\n和歌山県,37.23,98.2,46.22,5.18,49.6,9.58,29.29,6.84\n鳥取県,36.98,99.9,48.99,4.9,49.4,6.42,29.4,0.71\n島根県,24.24,100.1,49.4,4.69,49.6,2.42,30.1,3.53\n岡山県,46.69,100,46.88,4.14,54.5,9.34,32.15,1.37\n広島県,64.47,100.2,47,4.54,54.2,10.82,34.43,5.96\n山口県,49.22,99.6,45.92,4.52,51.5,2.65,33.25,2.7\n徳島県,32.7,99.6,45.37,4.22,48.9,5.45,32.07,0.82\n香川県,32.56,100.2,46.36,4.5,50.4,13.79,31.48,2.91\n愛媛県,52.95,100,46.4,4.42,50.6,5.73,33.51,6.07\n高知県,43.52,99.9,44.41,5.37,42.7,3.01,36.32,10.48\n福岡県,72.39,100.1,44.18,5.22,58.4,20.94,37.29,16.8\n佐賀県,31.43,100.2,49.26,4.89,50.7,15.56,26.77,5.74\n長崎県,48.03,99.8,46.77,5.44,46.8,9.58,31.8,12.3\n熊本県,47.81,99.5,46.71,4.97,51.3,13.64,30.82,2.79\n大分県,47.23,99.9,46.83,5.33,53.8,18.46,33.1,5.24\n宮崎県,46.11,99.9,47.03,4.92,48.4,9.27,32.02,1.57\n鹿児島県,40.21,99.9,45.74,5.31,49.6,10.62,35.55,1.3\n沖縄県,67.79,100,41.13,8.05,37.8,23.17,32.29,9.81\n","output":"str","x":434,"y":634.5,"wires":[["fafe3a9f7d53948c","167c3aaf5457d21c"]]},{"id":"fafe3a9f7d53948c","type":"csv","z":"45209c67f865ce73","g":"d15f5ac37f997abb","name":"first line isn't column name header","spec":"rfc","sep":",","hdrin":false,"hdrout":"none","multi":"one","ret":"\\r\\n","temp":"","skip":"0","strings":true,"include_empty_strings":"","include_null_values":"","x":719,"y":634.5,"wires":[["6854b9b186eb1dcc","2de3df48591831f9","dd3d56986aa5c62e"]]},{"id":"167c3aaf5457d21c","type":"csv","z":"45209c67f865ce73","g":"eb65804ed29893ba","name":"first line is header","spec":"rfc","sep":",","hdrin":true,"hdrout":"none","multi":"one","ret":"\\r\\n","temp":"","skip":"0","strings":true,"include_empty_strings":"","include_null_values":"","x":769,"y":728.5,"wires":[["c18c538ada98b13a","6d538a8c6804e906","53a35903c1d3af4a"]]},{"id":"c18c538ada98b13a","type":"ut-assert-values","z":"45209c67f865ce73","g":"eb65804ed29893ba","name":"","ignore_failure_if_succeed":false,"rules":[{"p":"columns","pt":"msg","t":"eql","to":"都道府県,人口集中地区人口比率,昼夜間人口比率,就業者比率,飲食店・宿泊業就業者比率,旅行行動者率,外国人宿泊者比率,単独世帯比率,人口10万人当たり感染者率","tot":"str"},{"p":"parts.count","pt":"msg","t":"eql","to":"47","tot":"str"}],"x":1114,"y":728.5,"wires":[[]]},{"id":"6d538a8c6804e906","type":"join","z":"45209c67f865ce73","g":"eb65804ed29893ba","name":"","mode":"custom","build":"array","property":"","propertyType":"full","key":"topic","joiner":"\\n","joinerType":"str","useparts":false,"accumulate":false,"timeout":"","count":"47","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1084,"y":805.75,"wires":[["4279cac4a60d86c4"]]},{"id":"53a35903c1d3af4a","type":"join","z":"45209c67f865ce73","g":"eb65804ed29893ba","name":"","mode":"custom","build":"array","property":"","propertyType":"full","key":"topic","joiner":"\\n","joinerType":"str","useparts":false,"accumulate":false,"timeout":"","count":"48","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1084,"y":868.5,"wires":[["25f61f7c1dcd0dab"]]},{"id":"4279cac4a60d86c4","type":"ut-assert-success","z":"45209c67f865ce73","g":"eb65804ed29893ba","name":"","x":1263,"y":805.75,"wires":[]},{"id":"25f61f7c1dcd0dab","type":"ut-assert-failure","z":"45209c67f865ce73","g":"eb65804ed29893ba","name":"","x":1263,"y":868.5,"wires":[]},{"id":"dd3d56986aa5c62e","type":"ut-assert-values","z":"45209c67f865ce73","g":"d15f5ac37f997abb","name":"","ignore_failure_if_succeed":false,"rules":[{"p":"columns","pt":"msg","t":"eql","to":"col1,col2,col3,col4,col5,col6,col7,col8,col9","tot":"str"},{"p":"parts.count","pt":"msg","t":"eql","to":"48","tot":"str"}],"x":1114.5,"y":486,"wires":[[]]},{"id":"2de3df48591831f9","type":"join","z":"45209c67f865ce73","g":"d15f5ac37f997abb","name":"","mode":"custom","build":"array","property":"","propertyType":"full","key":"topic","joiner":"\\n","joinerType":"str","useparts":false,"accumulate":false,"timeout":"","count":"48","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1084.5,"y":564.25,"wires":[["c50b22b0716816ab"]]},{"id":"6854b9b186eb1dcc","type":"join","z":"45209c67f865ce73","g":"d15f5ac37f997abb","name":"","mode":"custom","build":"array","property":"","propertyType":"full","key":"topic","joiner":"\\n","joinerType":"str","useparts":false,"accumulate":false,"timeout":"","count":"49","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":1084.5,"y":634.5,"wires":[["711c71fe50bae113"]]},{"id":"c50b22b0716816ab","type":"ut-assert-success","z":"45209c67f865ce73","g":"d15f5ac37f997abb","name":"","x":1263.5,"y":564.25,"wires":[]},{"id":"711c71fe50bae113","type":"ut-assert-failure","z":"45209c67f865ce73","g":"d15f5ac37f997abb","name":"","x":1263.5,"y":634.5,"wires":[]}]