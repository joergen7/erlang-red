[{"id":"fb50bac16667fc54","type":"tab","label":"[change] support num types","disabled":false,"info":"## Change node and num type\n\nQuick test to ensure that a change node can convert strings to nums.\n\nAlso a num type supports '0xabcd' for hex values and '0b10101' for binary values.\n\n## Failure\n\nThis test failures because Node-RED does not support negative binary and hexadecimal values - it does in the edit panel but then parses them incorrectly to produce 'NaN' values in the debug log.\n\n## Possible values for a num field?\n\nNode-RED is truly flexible when it comes to numbers, the following is a comment in the code about the various types I was able to identify:\n\n```erlang\n%%\n%% A parser for handling the num type in Node-RED, this field can have\n%% many different values:\n%%\n%%  0b1010111 - binary\n%%  1213 - integer\n%%  12.12 - float\n%%  0xfeedbabe - hexadecimal\n%%  123e112 - exponents\n%%  123.e112 - dot & exponents\n%%\n%% and all their negative counterparts:\n%%\n%%  -0b1010111 - binary\n%%  -1213 - integer\n%%  -12.12 - float\n%%  -0xfeedbabe - hexadecimal\n%%  -123e112 - exponents\n%%\n%% Not forgetting negative exponents:\n%%\n%%  -123e-112 - exponents\n%%  -123.e-112 - dot & negative exponents\n%%\n%% Floats that start with a fullstop:\n%%\n%%  .123\n%%  .23e12\n%%  .121e-12\n%%\n%% and plenty more that I have missed.\n%%\n%% My favourite float: '-.0e-1' negative zero\n%%\n%% So what seems like a simple case becomes complex, hence this parser.\n%%\n```\n\nI'm sure there things I've missed.\n","env":[]},{"id":"770c40da4f4950b5","type":"inject","z":"fb50bac16667fc54","name":"","props":[],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","x":526,"y":691,"wires":[["77d5e89fc8b48521","e6df3361485ed3c4"]]},{"id":"f9f1ac582bad9015","type":"ut-assert-values","z":"fb50bac16667fc54","name":"","ignore_failure_if_succeed":false,"rules":[{"p":"payload","pt":"msg","t":"eql","to":"1.23","tot":"num"},{"p":"intval","pt":"msg","t":"eql","to":"12345","tot":"num"},{"p":"floatval","pt":"msg","t":"eql","to":"12.345","tot":"num"},{"p":"hexasbinary","pt":"msg","t":"eql","to":"16843025","tot":"num"},{"p":"hexa","pt":"msg","t":"eql","to":"267310605","tot":"num"},{"p":"neghex","pt":"msg","t":"eql","to":"-218554095","tot":"num"},{"p":"negbin","pt":"msg","t":"eql","to":"-117","tot":"num"},{"p":"exp","pt":"msg","t":"eql","to":"1e124","tot":"num"},{"p":"negexp","pt":"msg","t":"eql","to":"-1e-122","tot":"num"},{"p":"dotexp","pt":"msg","t":"eql","to":"1000","tot":"num"}],"x":1054,"y":648.5,"wires":[[]]},{"id":"77d5e89fc8b48521","type":"change","z":"fb50bac16667fc54","name":"","rules":[{"p":"payload","pt":"msg","t":"set","to":"1.23","tot":"num"},{"p":"intval","pt":"msg","t":"set","to":"12345","tot":"num"},{"p":"floatval","pt":"msg","t":"set","to":"12.345","tot":"num"},{"p":"hexasbinary","pt":"msg","t":"set","to":"0x1010111","tot":"num"},{"p":"hexa","pt":"msg","t":"set","to":"0xfeed60d","tot":"num"},{"p":"neghex","pt":"msg","t":"set","to":"-0xd06deef","tot":"num"},{"p":"negbin","pt":"msg","t":"set","to":"-0b1110101","tot":"num"},{"p":"exp","pt":"msg","t":"set","to":"10e123","tot":"num"},{"p":"negexp","pt":"msg","t":"set","to":"-10e-123","tot":"num"},{"p":"dotexp","pt":"msg","t":"set","to":"1.e003","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":772,"y":648.5,"wires":[["f9f1ac582bad9015"]]},{"id":"ebc2b79cd40a19c7","type":"ut-assert-values","z":"fb50bac16667fc54","name":"","ignore_failure_if_succeed":false,"rules":[{"p":"dotexpneg","pt":"msg","t":"eql","to":"-1000","tot":"num"},{"p":"dotstartfloat","pt":"msg","t":"eql","to":"0.123","tot":"num"},{"p":"dotstartfloatexp","pt":"msg","t":"eql","to":"1.23e-13","tot":"num"},{"p":"dotstartfloatexppositive","pt":"msg","t":"eql","to":"123000000000","tot":"num"},{"p":"binary","pt":"msg","t":"eql","to":"42","tot":"num"},{"p":"dotstartneg","pt":"msg","t":"eql","to":"-0.124","tot":"num"},{"p":"dotstartnegexp","pt":"msg","t":"eql","to":"-124000000000","tot":"num"},{"p":"zero_two","pt":"msg","t":"eql","to":"0","tot":"num"},{"p":"zero","pt":"msg","t":"eql","to":"0","tot":"num"}],"x":1044,"y":755,"wires":[[]]},{"id":"e6df3361485ed3c4","type":"change","z":"fb50bac16667fc54","name":"","rules":[{"p":"dotexpneg","pt":"msg","t":"set","to":"-1.e003","tot":"num"},{"p":"dotstartfloat","pt":"msg","t":"set","to":".123","tot":"num"},{"p":"dotstartfloatexp","pt":"msg","t":"set","to":".123e-12","tot":"num"},{"p":"dotstartfloatexppositive","pt":"msg","t":"set","to":".123e12","tot":"num"},{"p":"binary","pt":"msg","t":"set","to":"0b101010","tot":"num"},{"p":"dotstartneg","pt":"msg","t":"set","to":"-.124","tot":"num"},{"p":"dotstartnegexp","pt":"msg","t":"set","to":"-.124e12","tot":"num"},{"p":"zero_two","pt":"msg","t":"set","to":"-.0e-1","tot":"num"},{"p":"zero","pt":"msg","t":"set","to":"0e-1","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":764,"y":755,"wires":[["ebc2b79cd40a19c7"]]}]